<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Features and Configuration &mdash; bluesky-queueserver 0.post1+g1328f7f documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/plot_directive.css" type="text/css" />
      <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Submitting and Managing Plans" href="workflow.html" />
    <link rel="prev" title="Introduction" href="introduction_for_users.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> bluesky-queueserver
          </a>
              <div class="version">
                0.post1+g1328f7f
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial (Demo)</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_history.html">Release History</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User's Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction_for_users.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Features and Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#managing-user-group-permissions">Managing User Group Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#remote-monitoring-of-console-output">Remote Monitoring of Console Output</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Submitting and Managing Plans</a></li>
<li class="toctree-l1"><a class="reference internal" href="startup_code.html">Organizing Bluesky Startup Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipython.html">Using IPython Startup Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="item_validation.html">Validation of Queue Items</a></li>
<li class="toctree-l1"><a class="reference internal" href="plan_annotation.html">Annotating Bluesky Plans</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli_tools.html">Command-Line Tools</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Application Developer's Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="interacting_with_qs.html">Interacting with Queue Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="re_manager_api.html">Run Engine Manager API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">bluesky-queueserver</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Features and Configuration</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/features_and_config.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="features-and-configuration">
<h1>Features and Configuration<a class="headerlink" href="#features-and-configuration" title="Permalink to this headline">¶</a></h1>
<p>Documentation is coming soon …</p>
<section id="managing-user-group-permissions">
<h2>Managing User Group Permissions<a class="headerlink" href="#managing-user-group-permissions" title="Permalink to this headline">¶</a></h2>
<p>Direct access via API calls to plans, devices and functions can be restricted by defining permissions
for different groups of users. The permissions are represented in the form of dictionary and saved in
a YAML file (default file name is <code class="docutils literal notranslate"><span class="pre">user_group_permissions.yaml</span></code>) located in the same directory as
the startup code. Alternative path to the YAML file may be specified using <code class="docutils literal notranslate"><span class="pre">--user-group-permissions</span></code>
parameter of <code class="docutils literal notranslate"><span class="pre">start-re-manager</span></code>. The YAML file contains lists of conditions (based on regular expressions)
that are applied to the names of plans and devices defined in startup scripts to generate lists of
allowed plans and devices for each user group. Plans from the allowed list could be submitted to
the queue using API calls such as <a class="reference internal" href="re_manager_api.html#method-queue-item-add"><span class="std std-ref">‘queue_item_add’</span></a> and the names of allowed devices could
be passed as plan parameters and then automatically converted to actual device objects before plans
are executed. Additional filters could be defined for each user group that allow/forbid execution of
functions (see <a class="reference internal" href="re_manager_api.html#method-function-execute"><span class="std std-ref">‘function_execute’</span></a>).</p>
<p>TODO: GUIDE/TUTORIAL FOR WRITING <code class="docutils literal notranslate"><span class="pre">user_group_permissions.yaml</span></code>.</p>
<p>Simple workflows could be implemented using static permissions defined in a YAML file and loaded
at startup of RE Manager. If the YAML file is changed while RE Manager is running, the permissions
may be reloaded by stopping and restarting RE Manager or sending <a class="reference internal" href="re_manager_api.html#method-permissions-reload"><span class="std std-ref">‘permissions_reload’</span></a> API
request. Note, that changes in permissions affect the plans that are already in the queue, i.e. some
plans may fail to start if the respective user permissions are removed. The dictionary with current
user group permissions can be downloaded by client applications at any time using
<a class="reference internal" href="re_manager_api.html#method-permissions-get"><span class="std std-ref">‘permissions_get’</span></a> API.</p>
<p>More complex workflows may require dynamically changing user group permissions. Dictionary with permissions
can be uploaded by client applications using <a class="reference internal" href="re_manager_api.html#method-permissions-set"><span class="std std-ref">‘permissions_set’</span></a> API. (Application developers
should be careful about exposing this API directly to facility users unless users are expected to be able
to change permissions at will. The API is primarily intended for use by a secure server that is managing
user data and permissions.) The way RE Manager is handling updated permissions is defined by
<code class="docutils literal notranslate"><span class="pre">--user-group-permissions-reload</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">start-re-manager</span></code>, which may take the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ON_STARTUP</span></code> (default): RE Manager is always loading permissions from disk file at startup.
Permissions from disk can be reloaded at any time using <a class="reference internal" href="re_manager_api.html#method-permissions-reload"><span class="std std-ref">‘permissions_reload’</span></a>
API. Permissions can be uploaded by the client application using <a class="reference internal" href="re_manager_api.html#method-permissions-set"><span class="std std-ref">‘permissions_set’</span></a> API.
RE manager will use the updated permissions until the end of the session. RE Manager is using
the uploaded permissions until the end of the session (until the manager is stopped and started again).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ON_REQUEST</span></code>: RE Manager attempts to load internally stored (in Redis) permissions at startup.
If no permissions are found (e.g. when starting newly installed Queue Server), RE Manager loads permissions
from the disk file and saves the permissions internally so that they could be loaded at the next startup.
Permissions can be reloaded from disk at any time by <a class="reference internal" href="re_manager_api.html#method-permissions-reload"><span class="std std-ref">‘permissions_reload’</span></a> API
or uploaded using <a class="reference internal" href="re_manager_api.html#method-permissions-set"><span class="std std-ref">‘permissions_set’</span></a> API. Each time permissions are changed, they are
saved internally, so that they could be loaded on the next startup.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NEVER</span></code>: RE manager behaves as if it was called with <code class="docutils literal notranslate"><span class="pre">ON_REQUEST</span></code> option except that
<a class="reference internal" href="re_manager_api.html#method-permissions-reload"><span class="std std-ref">‘permissions_reload’</span></a> API can not be used to reload permissions from disk (API call fails).
Permissions are still loaded from disk at startup if no internally stored permissions are found.
This option is the most appropriate for workflows, where permissions are managed externally and
uploaded to RE Manager when changed. In this case the disk file may contain some default, simple
and very restrictive set of permissions used for initialization during the first startup of RE Manager.</p></li>
</ul>
</section>
<section id="remote-monitoring-of-console-output">
<h2>Remote Monitoring of Console Output<a class="headerlink" href="#remote-monitoring-of-console-output" title="Permalink to this headline">¶</a></h2>
<p>RE Manager is capable of capturing and publishing console output to 0MQ socket.
0MQ publishing is disabled by default and must be enabled using <code class="docutils literal notranslate"><span class="pre">--zmq-publish</span></code>
parameter of <code class="docutils literal notranslate"><span class="pre">start-re-manager</span></code>. A simple monitoring application (<code class="docutils literal notranslate"><span class="pre">qserver-console-monitor</span></code>)
allows to visualize the published output. See <a class="reference internal" href="tutorial.html#remote-monitoring-tutorial"><span class="std std-ref">Remote Monitoring of RE Manager Console Output</span></a> for a brief
tutorial.</p>
<p><code class="docutils literal notranslate"><span class="pre">bluesky_queueserver</span></code> package provides <code class="docutils literal notranslate"><span class="pre">ReceiveConsoleOutput</span></code> and <code class="docutils literal notranslate"><span class="pre">ReceiveConsoleOutputAsync</span></code>
class, which can be helpful in implementing remote monitoring features in client applications. See
<a class="reference internal" href="interacting_with_qs.html#subscribing-to-console-output"><span class="std std-ref">Subscribing to Published Console Output</span></a> for more details.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="introduction_for_users.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="workflow.html" class="btn btn-neutral float-right" title="Submitting and Managing Plans" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2021, Brookhaven National Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>