

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Structures &mdash; tiled 0.1.0a32.post1+gd1fdef3 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/plot_directive.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Security" href="security.html" />
    <link rel="prev" title="Run Tiled using Docker" href="../how-to/docker.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> tiled
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0a32.post1+gd1fdef3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/navigation.html">Navigate with the Python Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/slicing.html">Load Slices of Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/caching.html">Keep a Local Copy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/export.html">Deliberate Export</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/serving-files.html">Serve a Directory of Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/search.html">Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/plotly-integration.html">Plot Data in Plotly Chart Studio</a></li>
</ul>
<p class="caption"><span class="caption-text">How To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../how-to/configuration.html">Serve Trees using Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/custom-formats.html">Add Support for a Custom Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/profiles.html">Use Profiles to streamline Python client setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/direct-client.html">Use Tiled in Python without an HTTP server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/tune-caches.html">Tune Caches to Balance Speed and Memory Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/docker.html">Run Tiled using Docker</a></li>
</ul>
<p class="caption"><span class="caption-text">Explanations</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Structures</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#supported-structure-families">Supported structure families</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-structure-is-encoded">How structure is encoded</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#array-single-chunk">Array (single chunk)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#array-multiple-chunks">Array (multiple chunks)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dataframe">DataFrame</a></li>
<li class="toctree-l3"><a class="reference internal" href="#variable-xarray">Variable (xarray)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dataarray-xarray">DataArray (xarray)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dataset-xarray">Dataset (xarray)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="compression.html">Compression</a></li>
<li class="toctree-l1"><a class="reference internal" href="caching.html">Caching Design and Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="access-control.html">Access Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="scaling-down.html">Scaling Tiled Down</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="lineage.html">How Tiled Fits into the Ecosystem</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/service.html">Service-side Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/http-api-overview.html">HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/python-client.html">Python Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/authentication.html">Authentication Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/authentication.html#configure-session-lifetime-parameters">Configure session lifetime parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/commandline.html">Command-line tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/service-configuration.html">Service Configuration Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/client-profiles.html">Client Profiles Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/design-documents/index.html">Design Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/release-history.html">Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/min-versions.html">Minimum Version of Python and NumPy</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">tiled</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Structures</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/explanations/structures.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="tex2jax_ignore mathjax_ignore section" id="structures">
<h1>Structures<a class="headerlink" href="#structures" title="Permalink to this headline">¶</a></h1>
<p>Tiled <em>Readers</em> provide data in one of a fixed group of standard <em>structure families</em>.
These are <em>not</em> Python-specific structures. They can be encoded in standard,
language-agnostic formats and transferred from the service to a client in
potentially any language.</p>
<div class="section" id="supported-structure-families">
<h2>Supported structure families<a class="headerlink" href="#supported-structure-families" title="Permalink to this headline">¶</a></h2>
<p>Five structure families are currently supported. The most widespread are:</p>
<ul class="simple">
<li><p>array — a strided array, like a <a class="reference external" href="https://numpy.org">numpy</a> array</p></li>
<li><p>dataframe — tabular data, as in <a class="reference external" href="https://arrow.apache.org">Apache Arrow</a> or
<a class="reference external" href="https://pandas.pydata.org/">pandas</a></p></li>
</ul>
<p>Three additional structures come from
<a class="reference external" href="https://xarray.pydata.org/en/stable/">xarray</a>. They may be considered
<em>containers</em> for one or more strided arrays, grouped together and marked up with
some additional metadata, such as labeled dimensions.</p>
<ul class="simple">
<li><p>variable — one strided array with some additional metadata</p></li>
<li><p>data_array — one or more strided arrays (the extras are “coordinates”)</p></li>
<li><p>dataset — a group of strided arrays with shared coordinates</p></li>
</ul>
<p>Support for <a class="reference external" href="https://awkward-array.org/">Awkward Array</a> is planned.</p>
<p>Adding support for a new structure is one of the few things in Tiled that is
<em>not</em> “pluggable” or extensible by downstream code. It requires a change deep in
the server and touches several aspects of the library.</p>
</div>
<div class="section" id="how-structure-is-encoded">
<h2>How structure is encoded<a class="headerlink" href="#how-structure-is-encoded" title="Permalink to this headline">¶</a></h2>
<p>Tiled can describe a structure—its shape, chunking, labels, and so on— for
the client so that the  client can intelligently request the pieces that it
wants.</p>
<p>The structures encodings are designed to be as unoriginal as possible, using
established standards and, where some invention is required, using established
names from numpy, pandas/Arrow, xarray, and dask.</p>
<p>The structures are encoded in two parts:</p>
<ul class="simple">
<li><p><strong>Macrostructure</strong> — This is the high-level structure including things like
shape, chunk shape, number of partitions, and column names. This structure
<em>has meaning to the server</em> and shows up in the HTTP API.</p></li>
<li><p><strong>Microstructure</strong> — This is low-level structure including things like
machine data type(s) and partition boundary locations. It enables the
service-side reader to communicate to the client how to interpret the bytes
that represent a given “tile” of data.</p></li>
</ul>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>These examples were generated by serving the demo tree</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tiled</span> <span class="n">serve</span> <span class="n">pyobject</span> <span class="o">--</span><span class="n">public</span> <span class="n">tiled</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">generated</span><span class="p">:</span><span class="n">tree</span>
</pre></div>
</div>
<p>making an HTTP request with <a class="reference external" href="https://httpie.io/">httpie</a>
and then extracting the portion of interest with
<a class="reference external" href="https://stedolan.github.io/jq/">jq</a>, as shown below.</p>
<div class="section" id="array-single-chunk">
<h3>Array (single chunk)<a class="headerlink" href="#array-single-chunk" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ http :8000/metadata/small_image | jq .data.attributes.structure
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;chunks&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">10</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">10</span>
      <span class="p">]</span>
    <span class="p">],</span>
    <span class="nt">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="mi">10</span><span class="p">,</span>
      <span class="mi">10</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;endianness&quot;</span><span class="p">:</span> <span class="s2">&quot;little&quot;</span><span class="p">,</span>
    <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;f&quot;</span><span class="p">,</span>
    <span class="nt">&quot;itemsize&quot;</span><span class="p">:</span> <span class="mi">8</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This <code class="docutils literal notranslate"><span class="pre">(10,</span> <span class="pre">10)</span></code>-shaped array fits in a single <code class="docutils literal notranslate"><span class="pre">(10,</span> <span class="pre">10)</span></code>-shaped chunk.</p>
</div>
<div class="section" id="array-multiple-chunks">
<h3>Array (multiple chunks)<a class="headerlink" href="#array-multiple-chunks" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ http :8000/metadata/arrays/large | jq .data.attributes.structure
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;chunks&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">2500</span><span class="p">,</span>
        <span class="mi">2500</span><span class="p">,</span>
        <span class="mi">2500</span><span class="p">,</span>
        <span class="mi">2500</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">2500</span><span class="p">,</span>
        <span class="mi">2500</span><span class="p">,</span>
        <span class="mi">2500</span><span class="p">,</span>
        <span class="mi">2500</span>
      <span class="p">]</span>
    <span class="p">],</span>
    <span class="nt">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="mi">10000</span><span class="p">,</span>
      <span class="mi">10000</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;endianness&quot;</span><span class="p">:</span> <span class="s2">&quot;little&quot;</span><span class="p">,</span>
    <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;f&quot;</span><span class="p">,</span>
    <span class="nt">&quot;itemsize&quot;</span><span class="p">:</span> <span class="mi">8</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This <code class="docutils literal notranslate"><span class="pre">(10000,</span> <span class="pre">10000)</span></code>-shaped array is subdivided into 4 × 4 = 16 chunks,
<code class="docutils literal notranslate"><span class="pre">(2500,</span> <span class="pre">2500)</span></code>. Chunks do <em>not</em> in general have to be equally-sized,
which is why the size of each chunk is given explicitly.</p>
<p>Notice that we could derive <code class="docutils literal notranslate"><span class="pre">shape</span></code> from <code class="docutils literal notranslate"><span class="pre">chunks</span></code> so it is not
technically necessary to include <code class="docutils literal notranslate"><span class="pre">shape</span></code> but it is convenient to
have it given directly.</p>
</div>
<div class="section" id="dataframe">
<h3>DataFrame<a class="headerlink" href="#dataframe" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ http :8000/metadata/long_table | jq .data.attributes.structure 
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;npartitions&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="nt">&quot;columns&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;A&quot;</span><span class="p">,</span>
      <span class="s2">&quot;B&quot;</span><span class="p">,</span>
      <span class="s2">&quot;C&quot;</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:8000/dataframe/meta/dataframes/df&quot;</span><span class="p">,</span>
      <span class="nt">&quot;divisions&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:8000/dataframe/divisions/dataframes/df&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>With dataframes, we speak of “partitions” instead of “chunks”. There are a
couple important distinctions. We always know the size of chunk before we ask
for it, but we will not know the number of rows in a partition until we
actually read it and enumerate them. Therefore, we cannot slice into
dataframes the same way that we can slice in to arrays. We can ask for a
subset of the <em>columns</em>, and we can fetch partitions one at a time in any
order, but we cannot make requests like “rows 100-200”. Dask has the same
limitation, for the same reason.</p>
<p>Notice that the microstructure contains links to other endpoints.
The correct way to encode dataframes and their data types in a cross-language
way is with Apache Arrow.  Apache Arrow is a binary format. It explicitly
does not support JSON.  (There is a JSON implementation, but the documentation
states that it is intended only for integration testing and should not be used
by external code.) Therefore, we direct the client to endpoints that serve
(binary) Apache Arrow-encoded data to express the microstructure because we
have no reasonable way of placing it inline in the response.</p>
<p>The microstructure has two parts:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">meta</span></code> — This contains the names and data types of the columns and index. To
generate this we build a dataframe with zero rows in it but the same columns
and indexes as the original, and then serialize that with Arrow.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">divisions</span></code> — This contains the index values that delineate each partition.
We generate this in a similar way.</p></li>
</ul>
<p>Both of the concepts (and their names) are borrowed directly from
dask.dataframe. They should enable any client, including in languages other than
Python, to perform the same function.</p>
</div>
<div class="section" id="variable-xarray">
<h3>Variable (xarray)<a class="headerlink" href="#variable-xarray" title="Permalink to this headline">¶</a></h3>
<p>As stated above, in this context all xarray structures can be thought of as
containers of array structures. They have no microstructure of their own, only a
macrostructure that contains array structures.</p>
<p><a class="reference external" href="http://xarray.pydata.org/en/stable/user-guide/terminology.html#term-Variable">Variable</a>
is a low-level structure in xarray that describes a single N-dimensional array,
adding names to each dimension (<code class="docutils literal notranslate"><span class="pre">dims</span></code>) and a dict of metadata (<code class="docutils literal notranslate"><span class="pre">attrs</span></code>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In xarray, there is a <em>soft</em> requirement that <code class="docutils literal notranslate"><span class="pre">attrs</span></code> contain only
JSON-serializable types like strings, numbers, and lists, and dicts. Most parts
of xarray will work even if this does not hold, but certain export functions
will not work. Likewise, Tiled can only serve xarray objects where the <code class="docutils literal notranslate"><span class="pre">attrs</span></code>
are JSON serializable.</p>
<p>Tiled <em>does</em> accept numpy scalars and arrays in <code class="docutils literal notranslate"><span class="pre">attrs</span></code> (or any metadata).
Before serializing to JSON or msgpack, it converts them to built-in numeric
types and lists, respectively. This works well as long as the arrays are not
large; <code class="docutils literal notranslate"><span class="pre">attrs</span></code> is not intended to hold large data.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ http :8000/metadata/xarrays/large/variable | jq .data.attributes.structure ```
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;dims&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;x&quot;</span><span class="p">,</span>
      <span class="s2">&quot;y&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;chunks&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">[</span>
            <span class="mi">2500</span><span class="p">,</span>
            <span class="mi">2500</span><span class="p">,</span>
            <span class="mi">2500</span><span class="p">,</span>
            <span class="mi">2500</span>
          <span class="p">],</span>
          <span class="p">[</span>
            <span class="mi">2500</span><span class="p">,</span>
            <span class="mi">2500</span><span class="p">,</span>
            <span class="mi">2500</span><span class="p">,</span>
            <span class="mi">2500</span>
          <span class="p">]</span>
        <span class="p">],</span>
        <span class="nt">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="mi">10000</span><span class="p">,</span>
          <span class="mi">10000</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;endianness&quot;</span><span class="p">:</span> <span class="s2">&quot;little&quot;</span><span class="p">,</span>
        <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;f&quot;</span><span class="p">,</span>
        <span class="nt">&quot;itemsize&quot;</span><span class="p">:</span> <span class="mi">8</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;attrs&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;thing&quot;</span><span class="p">:</span> <span class="s2">&quot;stuff&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="dataarray-xarray">
<h3>DataArray (xarray)<a class="headerlink" href="#dataarray-xarray" title="Permalink to this headline">¶</a></h3>
<p>A
<a class="reference external" href="http://xarray.pydata.org/en/stable/user-guide/terminology.html#term-DataArray">DataArray</a>
contains one Variable alongside coordinates (<code class="docutils literal notranslate"><span class="pre">coords</span></code>) that are meant to serve as “tick
labels” for the primary Variable. The “coordinates” are themselves Variables.
Therefore, DataArray can be described as a container for one Variable and (optional)
additional Variables.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ http :8000/metadata/xarrays/large/data_array | jq .data.attributes.structure
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;variable&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;dims&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="s2">&quot;x&quot;</span><span class="p">,</span>
          <span class="s2">&quot;y&quot;</span>
        <span class="p">],</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;chunks&quot;</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">[</span>
                <span class="mi">2500</span><span class="p">,</span>
                <span class="mi">2500</span><span class="p">,</span>
                <span class="mi">2500</span><span class="p">,</span>
                <span class="mi">2500</span>
              <span class="p">],</span>
              <span class="p">[</span>
                <span class="mi">2500</span><span class="p">,</span>
                <span class="mi">2500</span><span class="p">,</span>
                <span class="mi">2500</span><span class="p">,</span>
                <span class="mi">2500</span>
              <span class="p">]</span>
            <span class="p">],</span>
            <span class="nt">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span>
              <span class="mi">10000</span><span class="p">,</span>
              <span class="mi">10000</span>
            <span class="p">]</span>
          <span class="p">},</span>
          <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;endianness&quot;</span><span class="p">:</span> <span class="s2">&quot;little&quot;</span><span class="p">,</span>
            <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;f&quot;</span><span class="p">,</span>
            <span class="nt">&quot;itemsize&quot;</span><span class="p">:</span> <span class="mi">8</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;attrs&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;thing&quot;</span><span class="p">:</span> <span class="s2">&quot;stuff&quot;</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="kc">null</span>
    <span class="p">},</span>
    <span class="nt">&quot;coords&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;dims&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;x&quot;</span>
          <span class="p">],</span>
          <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;chunks&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">[</span>
                  <span class="mi">10000</span>
                <span class="p">]</span>
              <span class="p">],</span>
              <span class="nt">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="mi">10000</span>
              <span class="p">]</span>
            <span class="p">},</span>
            <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;endianness&quot;</span><span class="p">:</span> <span class="s2">&quot;little&quot;</span><span class="p">,</span>
              <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;i&quot;</span><span class="p">,</span>
              <span class="nt">&quot;itemsize&quot;</span><span class="p">:</span> <span class="mi">8</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nt">&quot;attrs&quot;</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">},</span>
        <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="kc">null</span>
      <span class="p">},</span>
      <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;dims&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;y&quot;</span>
          <span class="p">],</span>
          <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;chunks&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">[</span>
                  <span class="mi">10000</span>
                <span class="p">]</span>
              <span class="p">],</span>
              <span class="nt">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="mi">10000</span>
              <span class="p">]</span>
            <span class="p">},</span>
            <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;endianness&quot;</span><span class="p">:</span> <span class="s2">&quot;little&quot;</span><span class="p">,</span>
              <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;i&quot;</span><span class="p">,</span>
              <span class="nt">&quot;itemsize&quot;</span><span class="p">:</span> <span class="mi">8</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nt">&quot;attrs&quot;</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">},</span>
        <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="kc">null</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="kc">null</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="dataset-xarray">
<h3>Dataset (xarray)<a class="headerlink" href="#dataset-xarray" title="Permalink to this headline">¶</a></h3>
<p>A
<a class="reference external" href="http://xarray.pydata.org/en/stable/user-guide/terminology.html#term-Dataset">Dataset</a>
is a dict-like collection of DataArrays that may share coordinates.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ http :8000/metadata/xarrays/large/dataset | jq .data.attributes.structure
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;data_vars&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;image&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;variable&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;dims&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;x&quot;</span><span class="p">,</span>
                <span class="s2">&quot;y&quot;</span>
              <span class="p">],</span>
              <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="nt">&quot;chunks&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">[</span>
                      <span class="mi">2500</span><span class="p">,</span>
                      <span class="mi">2500</span><span class="p">,</span>
                      <span class="mi">2500</span><span class="p">,</span>
                      <span class="mi">2500</span>
                    <span class="p">],</span>
                    <span class="p">[</span>
                      <span class="mi">2500</span><span class="p">,</span>
                      <span class="mi">2500</span><span class="p">,</span>
                      <span class="mi">2500</span><span class="p">,</span>
                      <span class="mi">2500</span>
                    <span class="p">]</span>
                  <span class="p">],</span>
                  <span class="nt">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="mi">10000</span><span class="p">,</span>
                    <span class="mi">10000</span>
                  <span class="p">]</span>
                <span class="p">},</span>
                <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="nt">&quot;endianness&quot;</span><span class="p">:</span> <span class="s2">&quot;little&quot;</span><span class="p">,</span>
                  <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;f&quot;</span><span class="p">,</span>
                  <span class="nt">&quot;itemsize&quot;</span><span class="p">:</span> <span class="mi">8</span>
                <span class="p">}</span>
              <span class="p">},</span>
              <span class="nt">&quot;attrs&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;thing&quot;</span><span class="p">:</span> <span class="s2">&quot;stuff&quot;</span>
              <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="kc">null</span>
          <span class="p">},</span>
          <span class="nt">&quot;coords&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;dims&quot;</span><span class="p">:</span> <span class="p">[</span>
                  <span class="s2">&quot;x&quot;</span>
                <span class="p">],</span>
                <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;chunks&quot;</span><span class="p">:</span> <span class="p">[</span>
                      <span class="p">[</span>
                        <span class="mi">10000</span>
                      <span class="p">]</span>
                    <span class="p">],</span>
                    <span class="nt">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span>
                      <span class="mi">10000</span>
                    <span class="p">]</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;endianness&quot;</span><span class="p">:</span> <span class="s2">&quot;little&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;i&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;itemsize&quot;</span><span class="p">:</span> <span class="mi">8</span>
                  <span class="p">}</span>
                <span class="p">},</span>
                <span class="nt">&quot;attrs&quot;</span><span class="p">:</span> <span class="p">{}</span>
              <span class="p">},</span>
              <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="kc">null</span>
            <span class="p">},</span>
            <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;dims&quot;</span><span class="p">:</span> <span class="p">[</span>
                  <span class="s2">&quot;y&quot;</span>
                <span class="p">],</span>
                <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;chunks&quot;</span><span class="p">:</span> <span class="p">[</span>
                      <span class="p">[</span>
                        <span class="mi">10000</span>
                      <span class="p">]</span>
                    <span class="p">],</span>
                    <span class="nt">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span>
                      <span class="mi">10000</span>
                    <span class="p">]</span>
                  <span class="p">},</span>
                  <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;endianness&quot;</span><span class="p">:</span> <span class="s2">&quot;little&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;i&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;itemsize&quot;</span><span class="p">:</span> <span class="mi">8</span>
                  <span class="p">}</span>
                <span class="p">},</span>
                <span class="nt">&quot;attrs&quot;</span><span class="p">:</span> <span class="p">{}</span>
              <span class="p">},</span>
              <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="kc">null</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="kc">null</span>
      <span class="p">},</span>
      <span class="nt">&quot;z&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;variable&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;dims&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;dim_0&quot;</span>
              <span class="p">],</span>
              <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="nt">&quot;chunks&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">[</span>
                      <span class="mi">10000</span>
                    <span class="p">]</span>
                  <span class="p">],</span>
                  <span class="nt">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="mi">10000</span>
                  <span class="p">]</span>
                <span class="p">},</span>
                <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="nt">&quot;endianness&quot;</span><span class="p">:</span> <span class="s2">&quot;little&quot;</span><span class="p">,</span>
                  <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;f&quot;</span><span class="p">,</span>
                  <span class="nt">&quot;itemsize&quot;</span><span class="p">:</span> <span class="mi">8</span>
                <span class="p">}</span>
              <span class="p">},</span>
              <span class="nt">&quot;attrs&quot;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">},</span>
            <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="kc">null</span>
          <span class="p">},</span>
          <span class="nt">&quot;coords&quot;</span><span class="p">:</span> <span class="p">{},</span>
          <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;z&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="kc">null</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;coords&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;dims&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;x&quot;</span>
          <span class="p">],</span>
          <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;chunks&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">[</span>
                  <span class="mi">10000</span>
                <span class="p">]</span>
              <span class="p">],</span>
              <span class="nt">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="mi">10000</span>
              <span class="p">]</span>
            <span class="p">},</span>
            <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;endianness&quot;</span><span class="p">:</span> <span class="s2">&quot;little&quot;</span><span class="p">,</span>
              <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;i&quot;</span><span class="p">,</span>
              <span class="nt">&quot;itemsize&quot;</span><span class="p">:</span> <span class="mi">8</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nt">&quot;attrs&quot;</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">},</span>
        <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="kc">null</span>
      <span class="p">},</span>
      <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;dims&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;y&quot;</span>
          <span class="p">],</span>
          <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;macro&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;chunks&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">[</span>
                  <span class="mi">10000</span>
                <span class="p">]</span>
              <span class="p">],</span>
              <span class="nt">&quot;shape&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="mi">10000</span>
              <span class="p">]</span>
            <span class="p">},</span>
            <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;endianness&quot;</span><span class="p">:</span> <span class="s2">&quot;little&quot;</span><span class="p">,</span>
              <span class="nt">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;i&quot;</span><span class="p">,</span>
              <span class="nt">&quot;itemsize&quot;</span><span class="p">:</span> <span class="mi">8</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nt">&quot;attrs&quot;</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">},</span>
        <span class="nt">&quot;micro&quot;</span><span class="p">:</span> <span class="kc">null</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;attrs&quot;</span><span class="p">:</span> <span class="p">{}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="security.html" class="btn btn-neutral float-right" title="Security" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../how-to/docker.html" class="btn btn-neutral float-left" title="Run Tiled using Docker" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Bluesky Collaboration.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>