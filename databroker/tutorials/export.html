
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Export Data &mdash; databroker 1.2.5.post15+g5fbc5eb1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/plot_directive.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to download some Catalogs with data samples" href="../how-to/download-data-samples.html" />
    <link rel="prev" title="Navigate Metadata in a Run" href="get-metadata.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> databroker
          </a>
              <div class="version">
                1.2.5.post15+g5fbc5eb1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="search-and-lookup.html">Find Runs in a Catalog</a></li>
<li class="toctree-l1"><a class="reference internal" href="get-data.html">Get Data from a Run</a></li>
<li class="toctree-l1"><a class="reference internal" href="get-metadata.html">Navigate Metadata in a Run</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Export Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#set-up-for-tutorial">Set up for Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-s-in-the-run">What’s in the Run?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simple-export">Simple Export</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#export-to-csv-or-excel">Export to CSV or Excel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#export-to-hdf5">Export to HDF5</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#streaming-export">Streaming Export</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How-to Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../how-to/download-data-samples.html">How to download some Catalogs with data samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/file-backed-catalog.html">How to create a new Catalog backed by files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/store-data-from-run-engine.html">How to store data from the Run Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/store-analysis-results.html">How to store analysis results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/mongo-backed-catalog.html">How to create a new Catalog backed by MongoDB</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Explanations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../explanations/v2-transition.html">What are the API versions v0, v1, v2?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/local-and-remote-use-cases.html">How can it be used locally and remotely?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/relationship-to-intake.html">What is Databroker’s relationship to Intake?</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/v2.html">New (v2) API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/v1.html">Original (v1 / v0) API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/configuration.html">Configuration Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/changelog.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Bluesky Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://blueskyproject.io">Homepage</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/bluesky">GitHub</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Help</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://gitter.im/NSLS-II/DAMA">Gitter</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">databroker</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Export Data</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorials/export.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="export-data">
<h1>Export Data<a class="headerlink" href="#export-data" title="Permalink to this headline">¶</a></h1>
<p>In this tutorial we will export data from a Run to files. We will do this in
two ways:</p>
<ul class="simple">
<li><p>The simple way, using methods like <code class="docutils literal notranslate"><span class="pre">to_csv</span></code> provided by standard scientific
Python tools</p></li>
<li><p>The “streaming” way, using Bluesky’s Suitcases</p></li>
</ul>
<section id="set-up-for-tutorial">
<h2>Set up for Tutorial<a class="headerlink" href="#set-up-for-tutorial" title="Permalink to this headline">¶</a></h2>
<p>Before you begin, install <code class="docutils literal notranslate"><span class="pre">databroker</span></code> and <code class="docutils literal notranslate"><span class="pre">databroker-pack</span></code>, following the
<a class="reference internal" href="install.html"><span class="doc">Installation Tutorial</span></a>.</p>
<p>Start your favorite interactive Python environment, such as <code class="docutils literal notranslate"><span class="pre">ipython</span></code> or
<code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">lab</span></code>.</p>
<p>For this tutorial, we’ll use a catalog of publicly available, openly licensed
sample data. Specifically, it is high-quality transmission XAS data from all
over the periodical table.</p>
<p>This utility downloads it and makes it discoverable to Databroker.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">import</span> <span class="nn">databroker.tutorial_utils</span>

<span class="gp">In [2]: </span><span class="n">databroker</span><span class="o">.</span><span class="n">tutorial_utils</span><span class="o">.</span><span class="n">fetch_BMM_example</span><span class="p">()</span>
</pre></div>
</div>
<p>Access the catalog as assign it to a variable for convenience.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="kn">import</span> <span class="nn">databroker</span>

<span class="gp">In [4]: </span><span class="n">catalog</span> <span class="o">=</span> <span class="n">databroker</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s1">&#39;bluesky-tutorial-BMM&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Let’s take a Run from this Catalog.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">run</span> <span class="o">=</span> <span class="n">catalog</span><span class="p">[</span><span class="mi">23463</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="what-s-in-the-run">
<h2>What’s in the Run?<a class="headerlink" href="#what-s-in-the-run" title="Permalink to this headline">¶</a></h2>
<p>The Run’s “pretty display”, shown by IPython and Jupyter and some other
similar tools, shows us a summary.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">run</span>
<span class="gh">Out[6]: </span><span class="go"></span>
<span class="go">BlueskyRun</span>
<span class="go">  uid=&#39;4393404b-8986-4c75-9a64-d7f6949a9344&#39;</span>
<span class="go">  exit_status=&#39;success&#39;</span>
<span class="go">  2020-03-07 10:29:49.483 -- 2020-03-07 10:41:20.546</span>
<span class="go">  Streams:</span>
<span class="go">    * baseline</span>
<span class="go">    * primary</span>
</pre></div>
</div>
<p>Each run contains logical “tables” of data called <em>streams</em>. We can see them in
the summary above, and we iterate over them programmatically with a <code class="docutils literal notranslate"><span class="pre">for</span></code>
loop or with <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="nb">list</span><span class="p">(</span><span class="n">run</span><span class="p">)</span>
<span class="gh">Out[7]: </span><span class="go">[&#39;baseline&#39;, &#39;primary&#39;]</span>
</pre></div>
</div>
</section>
<section id="simple-export">
<h2>Simple Export<a class="headerlink" href="#simple-export" title="Permalink to this headline">¶</a></h2>
<section id="export-to-csv-or-excel">
<h3>Export to CSV or Excel<a class="headerlink" href="#export-to-csv-or-excel" title="Permalink to this headline">¶</a></h3>
<p>CSV can be suitable small amounts of scalar data. It’s not fast and it’s not
particularly good way to store numeric data or rich metadata—but it is
universally understood and human-readable.</p>
<p>Here, we look at the columns in the primary stream and choose some to export to
CSV.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">ds</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="gp">In [9]: </span><span class="n">ds</span>
<span class="gh">Out[9]: </span><span class="go"></span>
<span class="go">&lt;xarray.Dataset&gt;</span>
<span class="go">Dimensions:                   (time: 411)</span>
<span class="go">Coordinates:</span>
<span class="go">  * time                      (time) float64 1.584e+09 1.584e+09 ... 1.584e+09</span>
<span class="go">Data variables:</span>
<span class="go">    I0                        (time) float64 135.2 135.0 134.8 ... 99.55 99.31</span>
<span class="go">    It                        (time) float64 123.2 123.3 123.5 ... 38.25 38.27</span>
<span class="go">    Ir                        (time) float64 55.74 55.98 56.2 ... 9.683 9.711</span>
<span class="go">    dwti_dwell_time           (time) float64 1.0 1.0 1.0 1.0 ... 1.0 1.0 1.0 1.0</span>
<span class="go">    dwti_dwell_time_setpoint  (time) float64 1.0 1.0 1.0 1.0 ... 1.0 1.0 1.0 1.0</span>
<span class="go">    dcm_energy                (time) float64 8.133e+03 8.143e+03 ... 9.075e+03</span>
<span class="go">    dcm_energy_setpoint       (time) float64 8.133e+03 8.143e+03 ... 9.075e+03</span>

<span class="gp">In [10]: </span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;I0&quot;</span><span class="p">,</span> <span class="s2">&quot;It&quot;</span><span class="p">,</span> <span class="s2">&quot;Ir&quot;</span><span class="p">,</span> <span class="s2">&quot;dcm_energy&quot;</span><span class="p">]</span>  <span class="c1"># columns we want to export</span>

<span class="gp">In [11]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">columns</span><span class="p">]</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>

<span class="gp">In [12]: </span><span class="n">df</span>
<span class="gh">Out[12]: </span><span class="go"></span>
<span class="go">                      I0          It         Ir   dcm_energy</span>
<span class="go">time                                                        </span>
<span class="go">1.583577e+09  135.166441  123.161731  55.739678  8132.815659</span>
<span class="go">1.583577e+09  134.979163  123.342974  55.977293  8142.810017</span>
<span class="go">1.583577e+09  134.785572  123.504594  56.202308  8152.849665</span>
<span class="go">1.583577e+09  134.635738  123.709273  56.458782  8162.843543</span>
<span class="go">1.583577e+09  134.702942  124.117268  56.789872  8172.831253</span>
<span class="go">...                  ...         ...        ...          ...</span>
<span class="go">1.583578e+09  100.425114   38.201779   9.591793  9053.740421</span>
<span class="go">1.583578e+09  100.171185   38.236501   9.629766  9058.972209</span>
<span class="go">1.583578e+09   98.829689   37.850528   9.557539  9064.259744</span>
<span class="go">1.583578e+09   99.550269   38.245548   9.683483  9069.553609</span>
<span class="go">1.583578e+09   99.306863   38.267523   9.711234  9074.853815</span>

<span class="go">[411 rows x 4 columns]</span>

<span class="go"># Setting index=False omits the &quot;time&quot; index on the left from the output.</span>
<span class="gp">In [13]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;data.csv&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>If you target is to get data into Excel, note that you can write Excel files
directly. This requires an additional dependency that you may not already have
installed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install Excel writer used by pandas using pip...</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">openpyxl</span>
<span class="c1"># or conda...</span>
<span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">openpyxl</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [14]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s2">&quot;data.xlsx&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Both of these methods have a large number of options to customize the output.
Use <code class="docutils literal notranslate"><span class="pre">df.to_csv?</span></code> (IPython, Jupyter) or <code class="docutils literal notranslate"><span class="pre">help(df.to_csv)</span></code> to learn more.
Likesie for <code class="docutils literal notranslate"><span class="pre">df.to_excel</span></code>.</p>
<p>If you have many runs to do in batch, you may use the metadata to automatically
generate filenames. It is strongly recommended to include part of the globally
unique id, <code class="docutils literal notranslate"><span class="pre">uid</span></code>, at the end to ensure that names do not clash and overwrite.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [15]: </span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;I0&quot;</span><span class="p">,</span> <span class="s2">&quot;It&quot;</span><span class="p">,</span> <span class="s2">&quot;Ir&quot;</span><span class="p">,</span> <span class="s2">&quot;dcm_energy&quot;</span><span class="p">]</span>

<span class="gp">In [16]: </span><span class="n">results</span> <span class="o">=</span> <span class="n">catalog</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;XDI.Element.symbol&quot;</span><span class="p">:</span> <span class="s2">&quot;Mn&quot;</span><span class="p">})</span>

<span class="gp">In [17]: </span><span class="k">for</span> <span class="n">uid</span><span class="p">,</span> <span class="n">run</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="gp">   ....: </span>    <span class="n">ds</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">   ....: </span>    <span class="n">df</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">columns</span><span class="p">]</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
<span class="gp">   ....: </span>    <span class="n">md</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">]</span>
<span class="gp">   ....: </span>    <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Mn-spectra-</span><span class="si">{</span><span class="n">md</span><span class="p">[</span><span class="s2">&quot;scan_id&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="n">md</span><span class="p">[</span><span class="s2">&quot;uid&quot;</span><span class="p">]</span><span class="si">:</span><span class="s1">.8</span><span class="si">}</span><span class="s1">.csv&#39;</span>
<span class="gp">   ....: </span>    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">   ....: </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Saved </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">   ....: </span>
<span class="go">Saved Mn-spectra-22668-3c3da7c8.csv</span>
<span class="go">Saved Mn-spectra-23457-292e1bcb.csv</span>
<span class="go">Saved Mn-spectra-22670-c353bdda.csv</span>
<span class="go">Saved Mn-spectra-22671-776a03b3.csv</span>
<span class="go">Saved Mn-spectra-23726-12a63104.csv</span>
<span class="go">Saved Mn-spectra-22669-647b0065.csv</span>
</pre></div>
</div>
</section>
<section id="export-to-hdf5">
<h3>Export to HDF5<a class="headerlink" href="#export-to-hdf5" title="Permalink to this headline">¶</a></h3>
<p>HDF5 is suitable for image data. It is understood by most data analysis
software.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This example uses h5py.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="n">h5py</span>

<span class="c1"># or...</span>

<span class="n">pip</span> <span class="n">install</span> <span class="n">h5py</span>
</pre></div>
</div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [18]: </span><span class="kn">import</span> <span class="nn">h5py</span>

<span class="gp">In [19]: </span><span class="n">ds</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="gp">In [20]: </span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;I0&quot;</span><span class="p">,</span> <span class="s2">&quot;It&quot;</span><span class="p">,</span> <span class="s2">&quot;Ir&quot;</span><span class="p">,</span> <span class="s2">&quot;dcm_energy&quot;</span><span class="p">]</span>  <span class="c1"># columns we want to export</span>

<span class="gp">In [21]: </span><span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="s2">&quot;data.h5&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
<span class="gp">   ....: </span>    <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
<span class="gp">   ....: </span>        <span class="n">file</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
</section>
</section>
<section id="streaming-export">
<h2>Streaming Export<a class="headerlink" href="#streaming-export" title="Permalink to this headline">¶</a></h2>
<p>A tool built for streaming export can be used on both saved data (as we’ll do
here) and on live-streaming data during data acquisition.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This example uses suitcase-csv.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">nsls2forge</span> <span class="n">suitcase</span><span class="o">-</span><span class="n">csv</span>

<span class="c1"># or...</span>

<span class="n">pip</span> <span class="n">install</span> <span class="n">suitcase</span><span class="o">-</span><span class="n">csv</span>
</pre></div>
</div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [22]: </span><span class="kn">import</span> <span class="nn">suitcase.csv</span>

<span class="gp">In [23]: </span><span class="n">artifacts</span> <span class="o">=</span> <span class="n">suitcase</span><span class="o">.</span><span class="n">csv</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">documents</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s2">&quot;yes&quot;</span><span class="p">),</span> <span class="s2">&quot;output_directory&quot;</span><span class="p">)</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="nn">Input In [23],</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">artifacts</span> <span class="o">=</span> <span class="n">suitcase</span><span class="o">.</span><span class="n">csv</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">documents</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s2">&quot;yes&quot;</span><span class="p">),</span> <span class="s2">&quot;output_directory&quot;</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/suitcase/csv/__init__.py:87,</span> in <span class="ni">export</span><span class="nt">(gen, directory, file_prefix, **kwargs)</span>
<span class="g g-Whitespace">     </span><span class="mi">85</span> <span class="k">with</span> <span class="n">Serializer</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">file_prefix</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="k">as</span> <span class="n">serializer</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">86</span>     <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">gen</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">87</span>         <span class="n">serializer</span><span class="p">(</span><span class="o">*</span><span class="n">item</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">89</span> <span class="k">return</span> <span class="n">serializer</span><span class="o">.</span><span class="n">artifacts</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/suitcase/csv/__init__.py:294,</span> in <span class="ni">Serializer.__exit__</span><span class="nt">(self, *exception_details)</span>
<span class="g g-Whitespace">    </span><span class="mi">293</span> <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">exception_details</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">294</span>     <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/suitcase/csv/__init__.py:288,</span> in <span class="ni">Serializer.close</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">285</span> <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">286</span>     <span class="sd">&#39;&#39;&#39;Close all of the files opened by this Serializer.</span>
<span class="g g-Whitespace">    </span><span class="mi">287</span><span class="sd">     &#39;&#39;&#39;</span>
<span class="ne">--&gt; </span><span class="mi">288</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_manager</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/suitcase/utils/__init__.py:266,</span> in <span class="ni">MultiFileManager.close</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">264</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_artifacts</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">265</span>     <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">handle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">266</span>         <span class="n">a</span><span class="o">.</span><span class="n">handle</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/suitcase/utils/__init__.py:93,</span> in <span class="ni">Artifact.handle.&lt;locals&gt;.update_size_on_close.&lt;locals&gt;.wrapped_close</span><span class="nt">()</span>
<span class="g g-Whitespace">     </span><span class="mi">92</span> <span class="k">def</span> <span class="nf">wrapped_close</span><span class="p">():</span>
<span class="ne">---&gt; </span><span class="mi">93</span>     <span class="n">handle</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">SEEK_END</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">94</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_final_size</span> <span class="o">=</span> <span class="n">handle</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span>
<span class="g g-Whitespace">     </span><span class="mi">95</span>     <span class="n">orig_close</span><span class="p">()</span>

<span class="ne">ValueError</span>: I/O operation on closed file.

<span class="gp">In [24]: </span><span class="n">artifacts</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="nn">Input In [24],</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">artifacts</span>

<span class="ne">NameError</span>: name &#39;artifacts&#39; is not defined
</pre></div>
</div>
<p>Note that this operates on the entire <cite>run</cite> and all of its streams. When a Run
contains multiple streams, multiple CSV files will be created. This is why it
acceps a path to a <em>directory</em> rather than a path to a single file. Any data
that does well-suited to the format (e.g. image data in this case) is omitted
for the export.</p>
<p>See <a class="reference external" href="https://blueskyproject.io/suitcase">Suitcase</a> for a list of supported formats and more information.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="get-metadata.html" class="btn btn-neutral float-left" title="Navigate Metadata in a Run" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../how-to/download-data-samples.html" class="btn btn-neutral float-right" title="How to download some Catalogs with data samples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015 Brookhaven National Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>